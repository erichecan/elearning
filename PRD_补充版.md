# 产品需求文档（PRD）补充版

**1. 首页信息架构与核心交互（儿童端）**
1. 顶部栏（从左到右）
1. `奖励系统`：代币/金币入口，显示当前金币、今日可兑换奖励。
1. `情绪控制室`：情绪调节入口，支持快速进入情绪调节面板（Zones of Regulation）。
1. `at school`：家长上传学校场景照片，绑定场景事件与VSD热区，快速切换“学校语境”词库。
1. `at home`：家长上传家庭场景照片，绑定场景事件与VSD热区，快速切换“家庭语境”词库。
1. `任务提醒`（右上角）：来自日程管理模块的实时任务提示，点击进入当前任务的Focus模式。
1. 中部核心区域
1. `句子条（Sentence Strip）`：显示已选 core words 形成的一句话，支持TTS朗读与一键清空。
1. `Core Words Grid`：核心词网格（2x2 至 10x10），固定位置运动记忆锁定，Fitzgerald配色。
1. 底部功能入口（模块区）
1. `math`：数学训练模块。
1. `flashcards`：闪卡学习模块。
1. `绘本`：AI生成阅读绘本模块（社交故事/情境故事）。
1. `settings`（右下角）：配置入口（家长端权限受控）。

**2. 功能需求（补充细化）**

**2.1 智能辅助沟通（Smart AAC）**
1. Core Words 网格系统：固定核心词位置，支持多密度网格。
1. Sentence Strip：点击词汇自动拼句，TTS朗读，支持中英文混排。
1. Context-Aware 预测：按时间/地点/历史行为推荐词汇。
1. VSD 场景交互：家长拍摄场景照片，设置热区与语句触发。

**2.2 生活技能与执行功能（LifeOS）**
1. 交互式视觉日程：Focus模式显示当前任务，完成动作触发奖励。
1. 任务拆解（Task Analysis）：子步骤图、GIF/短视频引导。
1. 视觉计时器：Time Timer风格红色扇形倒计时。
1. 任务提醒：首页右上角提示当前任务，支持一键进入任务卡。

**2.3 情绪调节与行为干预（EmoGuard）**
1. 情绪区检查板（Zones of Regulation）：蓝/绿/黄/红情绪自检。
1. 情绪控制室入口：主界面快速进入情绪调节界面。
1. 生物反馈（可选P1-P2）：连接手表监测心率触发调节提示。

**2.4 奖励系统（Token Economy）**
1. 完成任务或正确使用AAC自动奖励金币/星星。
1. 兑换机制：达到阈值解锁奖励（应用内小游戏/视频时长）。
1. 家长端配置奖励内容与兑换规则。

**2.5 学习模块**
1. 数学模块（math）
1. 低认知阶段：图形数量配对、颜色/形状识别、基础加减。
1. 中高阶段：题目+视觉辅助，完成后触发奖励。
1. Flashcards 模块
1. 图片+文字+语音发声闪卡。
1. 支持家长上传自定义卡片（场景/实物/人物）。
1. AI绘本/阅读模块
1. 生成6页左右图文绘本（社交故事/场景故事）。
1. 角色自动替换为儿童头像或卡通Avatar。
1. 支持朗读、逐页播放、收藏。

**3. 前端需求（儿童端、家长端、治疗师端）**

**3.1 儿童端（Tablet优先）**
1. 首页布局严格遵循截图与本PRD描述。
1. Core Words 网格支持拖动排序与锁定。
1. 句子条支持一键朗读与删除最后一个词。
1. 顶部场景（at home / at school）切换后：
1. 词库自动切换。
1. 绑定场景照片背景更新。
1. 相关日程或任务优先展示。
1. 任务提醒常驻右上角（可折叠）。
1. 进入任务后显示Focus模式，底部仍保留AAC紧急按钮。

**3.2 家长端（Mobile优先）**
1. 儿童档案管理：基础信息、能力等级、偏好。
1. 场景管理：上传照片，设置VSD热区与语句。
1. 日程管理：任务创建、步骤拆解、重复规则。
1. 奖励设置：金币规则、兑换奖励。
1. 词库管理：核心词+情境词设置。
1. 生成绘本：输入场景/目标情境，生成预览并发布。

**3.3 治疗师端（Web）**
1. 数据看板：AAC使用频率、独立沟通率、任务完成率。
1. ABC行为报表：前因-行为-后果记录。
1. 词库远程更新与任务调整权限。

**4. 后端需求（核心服务与接口）**

**4.1 账户与权限系统**
1. 多角色体系：儿童、家长、治疗师。
1. 家长账户关联多个儿童。
1. 角色权限分级（儿童端只读+有限输入）。

**4.2 数据模型（核心实体）**
1. User、ChildProfile、Caregiver、Therapist。
1. Vocabulary（Core/Context/Custom）、Category、VSDScene、Hotspot。
1. Schedule、Task、TaskStep、Reminder。
1. Token、RewardRule、Redemption。
1. Flashcard、MathExercise、StoryBook。
1. AnalyticsEvent、ABCLog。

**4.3 服务模块**
1. AAC服务
1. 词库读取、预测推荐、TTS生成。
1. VSD热区触发与语句播放。
1. 日程服务
1. 任务创建、步骤管理、提醒推送。
1. 任务完成触发奖励。
1. 奖励服务
1. 代币累积、兑换规则校验、兑换记录。
1. 学习内容服务
1. flashcards CRUD与多媒体存储。
1. math题库与进度记录。
1. AI绘本服务
1. 文本生成接口（LLM）。
1. 插画生成/选择接口。
1. 安全过滤与家长审核。
1. 数据分析服务
1. ABC埋点与报表生成。
1. 使用统计与趋势分析。

**4.4 同步与离线**
1. 离线优先：AAC发声与日程提醒必须离线可用。
1. 本地缓存+增量同步机制。
1. 冲突解决规则（以家长端为主）。

**4.5 安全与合规**
1. COPPA/GDPR合规。
1. 国内数据本地化存储。
1. 媒体数据加密存储，敏感语音尽量端侧处理。

**5. 非功能性需求**
1. UI/UX：低刺激配色（鼠尾草绿/德国蓝）。
1. 点击反馈：柔和提示音，无过度动画。
1. 防误触：支持“按住0.5秒触发”。
1. 响应速度：AAC点击-发声 <200ms。

**6. 版本规划（更新补充）**
1. MVP（3个月）
1. 核心AAC网格、句子条、TTS。
1. 基础日程与任务提醒。
1. 代币奖励系统。
1. Flashcards基础版本。
1. Phase 2（6个月）
1. AI词汇预测。
1. VSD场景上传与热区。
1. AI绘本生成。
1. Math模块上线。
1. Phase 3（9-12个月）
1. 生物反馈情绪调节。
1. 治疗师端与数据看板。
1. 场景感知自动切换。
